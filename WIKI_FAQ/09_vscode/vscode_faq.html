<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11. VSCode 小技巧 &mdash; bluetoothlover_wiki 0.0.1 文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="12. VSCode 常用插件" href="vscode_plugin.html" />
    <link rel="prev" title="10. VSCode 调试" href="vscode_debug.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> bluetoothlover_wiki
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">BLE knowledge:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ble/index.html">BLE STACK篇</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ble_profile/index.html">BLE PROFILE篇</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nordic/index.html">Nordic 篇</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../WB55/index.html">STM32WB55 篇</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">WIKI FAQ 篇</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01/01_introduce.html">1. WIKI FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02/01_introduce.html">2. ReadtheDocs从懵逼到入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03/markdown_faq.html">3. Markdown 写作技巧</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04/wiki_rule.html">4. WIKI  RULE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05/markdown_flow.html">5. 如何用markdown 画流程图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_git_flow/git_flow.html">6. GIT 技巧总结</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07_python_skill/pip_install_china_source.html">7. PIP 如何添加国内源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_uml/plantUML%E5%AE%89%E8%A3%85.html">8. plantUML 安装教程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_uml/plantUML%E7%BB%98%E5%9B%BE%E7%AE%80%E4%BB%8B.html">9. plantUML 绘图简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode_debug.html">10. VSCode 调试</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11. VSCode 小技巧</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">11.1. 快捷键</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stm32-rt-thread">11.2. stm32 调试RT-THREAD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">11.2.1. 调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">11.2.2. 调试原理</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmsis-dap">11.2.3. CMSIS-DAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#segger-jlink">11.2.4. segger- JLINK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#st-link">11.2.5. ST- LINK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vscode-launch-json">11.2.6. vscode 配置  launch.json</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">11.2.7. 单步进行汇编调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">11.2.8. 能够实时看到寄存器值的变化。</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#cortex-debug">11.3. Cortex debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="#armrtthreadgcc">11.4. 支持新的ARM开发板到RTTHREAD上的GCC 需要注意事项</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#entry">11.4.1. entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ld">11.4.2. ld特定标号</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rtconfig-py">11.4.3. rtconfig.py</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hex">11.4.4. 生成hex文件</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#printf">11.5. printf</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vscode_plugin.html">12. VSCode 常用插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode_shortkey.html">13. VSCODE 快捷键</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../RTTHREAD/index.html">RTTHRED: RT-Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../12_ESP32/index.html">ESP32</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DEBUG/index.html">EMBEDDED DEBUG 篇</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../00_supperthomas/index.html">MASTER:supperthomas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../01_helloworldzlg/index.html">WB55:helloworldzlg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../02_Jackistang/index.html">WB55:Jackistang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../03_xupenghu/index.html">WB55:xupenghu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../04_dozingfiretruck/index.html">WB55:dozingfiretruck</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../05_luhuadong/index.html">WB55:luhuadong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../09_answerinthewind/index.html">WB55:answerinthewind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06_chenyingchun0312/index.html">NORDIC:chenyingchun0312</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../07_ylz0923/index.html">NORDIC:ylz0923</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../08_guohp1128/index.html">NORDIC:guohp1128</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../10_jiy/index.html">NORDIC:jiy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11_ForestRain/index.html">NORDIC:ForestRain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../13_xiangxistu/index.html">NORDIC:xiangxistu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../14_bobwenstudy/index.html">NORDIC:bobwenstudy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../16_ColeStudy/index.html">NORDIC:ColeStudy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">bluetoothlover_wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">WIKI FAQ 篇</a></li>
      <li class="breadcrumb-item active"><span class="section-number">11. </span>VSCode 小技巧</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/WIKI_FAQ/09_vscode/vscode_faq.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vscode">
<h1><span class="section-number">11. </span>VSCode 小技巧<a class="headerlink" href="#vscode" title="此标题的永久链接"></a></h1>
<p>更全面的信息可以参考官方 <a class="reference external" href="https://code.visualstudio.com/docs/editor/debugging#_launch-configurations">调试手册</a> ，</p>
<section id="id1">
<h2><span class="section-number">11.1. </span>快捷键<a class="headerlink" href="#id1" title="此标题的永久链接"></a></h2>
<ul class="simple">
<li><p>ctrl + shift + p  显示命令</p></li>
<li><p>ctrl + alt + F 格式化文件</p></li>
</ul>
</section>
<section id="stm32-rt-thread">
<h2><span class="section-number">11.2. </span>stm32 调试RT-THREAD<a class="headerlink" href="#stm32-rt-thread" title="此标题的永久链接"></a></h2>
<p>RT-THREAD  如何用vscode来调试代码呢？</p>
<p>写代码分为以下两步</p>
<ul class="simple">
<li><p>编译 clean  这个的配置在task.json里面，快捷键是ctrl + shift + b</p></li>
<li><p>调试 这个是在launch.json里面配置，这个配置完了之后，在debug哪里可以看到相应的配置，快捷键F5</p></li>
</ul>
<section id="id2">
<h3><span class="section-number">11.2.1. </span>调试<a class="headerlink" href="#id2" title="此标题的永久链接"></a></h3>
<p>我们先来看看有ARM哪些调试器</p>
<ul class="simple">
<li><p>Segger J-Link GDB Server (<a class="reference external" href="https://www.segger.com/products/debug-probes/j-link/tools/j-link-gdb-server/about-j-link-gdb-server/">https://www.segger.com/</a>) (https://wiki.segger.com/J-Link_Visual_Studio_Code)</p></li>
<li><p>PE-Micro GDB Server (<a class="reference external" href="http://www.pemicro.com/">http://www.pemicro.com</a>)</p></li>
<li><p>Texane’s St-Link Utils (https://github.com/stlink-org/stlink)</p></li>
<li><p>Black Magic Probe Embedded GDB server (https://github.com/blacksphere/blackmagic/wiki)</p></li>
<li><p>PyOCD (https://github.com/mbedmicro/pyOCD)</p></li>
<li><p>OpenOCD (Note: Please use the latest version, 0.11.0-rc1 when writing this, <a class="reference external" href="https://github.com/ntfreak/openocd/suites/1638965716/artifacts/30318150">prebuilt binaries for windows</a>)</p></li>
<li><p>QEMU Emulated Environment</p></li>
</ul>
<p>J-link就是那个黑黑的盒子</p>
<p>st-link是STM32公司特有的</p>
<p>openocd  是一款开源的比较强大的软件</p>
<p>怎么理解呢，可以这么理解segger jlink和st-link以及openocd都是一家公司，你理解为一家公司，每个公司都会为一种特定的芯片商服务，比如jlink就对黑色的jlink比较擅长，st-link就是对stm32的芯片比较擅长。</p>
<p>而openocd既可以适配jlink也可以适配st-link</p>
<p>OpenOCD（Open On-Chip Debugger）开源片上调试器，是一款开源软件，最初是由Dominic Rath同学还在大学期间发起的（2005年）项目。OpenOCD旨在提供针对嵌入式设备的调试、系统编程和边界扫描功能。</p>
</section>
<section id="id3">
<h3><span class="section-number">11.2.2. </span>调试原理<a class="headerlink" href="#id3" title="此标题的永久链接"></a></h3>
<p><img alt="image-20210224223450161" src="../../_images/image-20210224223450161.png" /></p>
<p>一般如果采用GDB调试的时候，一般需要开一个GDB server，比如j-link里面的GDB server。 ST-LINK SERVER</p>
<p>GDB client端就是我们常用的arm-none-eabi-gdb或者gdb一个client端。</p>
<p>server通常会开一个端口来接收client端的连接，所以先开server，开server的时候，如下图</p>
<p><img alt="../../_images/image-20210224224101899.png" src="../../_images/image-20210224224101899.png" /></p>
<p>这个时候可以从info里面看到port 3333 这个时候server就起来了。</p>
<p>后面我们就要起一个client端</p>
<p><img alt="image-20210224224313455" src="../../_images/image-20210224224313455.png" /></p>
<p>输入命令： <code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">remote</span> <span class="pre">localhost:3333</span></code></p>
<p>这个时候，就可以连上远端了。这个GDB server端，可以是segger jlink公司的，也可以是openocd公司的，也可以是st-link公司的GDB server。这个就是上层调试软件的目的。</p>
<p>而client端的GDB client，都是arm-none-eabi.gdb.exe 直接连接，通过端口号或者其他口都可以连接上。所以也可以远程连接。</p>
<p>所以，对于你如果既要用st-link又要用jlink等操作，你可以直接学习下openocd的GDB server，这个是对大部分的调试器都支持的。不管你手上的是ST-LINK还是j-link还是CMSIS-DAP。</p>
<p>都可以支持，</p>
<p>openocd的官方文件也是超级全的。</p>
<p>https://blog.csdn.net/wxh0000mm/article/details/84788128</p>
<p>http://openocd.org/doc-release/html/GDB-and-OpenOCD.html#Sample-GDB-session-startup</p>
</section>
<section id="cmsis-dap">
<h3><span class="section-number">11.2.3. </span>CMSIS-DAP<a class="headerlink" href="#cmsis-dap" title="此标题的永久链接"></a></h3>
<p>什么是CMSIS-DAP呢，这个是DAPLINK的，是mbed，就是ARM公司自己研发的一种调试器，这种调试器对于大部分的ARM都是可以适配的。</p>
<p><a class="reference external" href="https://github.com/ARMmbed/DAPLink">CMSIS-DAP</a></p>
</section>
<section id="segger-jlink">
<h3><span class="section-number">11.2.4. </span>segger- JLINK<a class="headerlink" href="#segger-jlink" title="此标题的永久链接"></a></h3>
<p>这个是一家公司，也比较有名，生态也非常好。</p>
<p><a class="reference external" href="https://www.segger.com/downloads/jlink">segger</a></p>
</section>
<section id="st-link">
<h3><span class="section-number">11.2.5. </span>ST- LINK<a class="headerlink" href="#st-link" title="此标题的永久链接"></a></h3>
<p>ST-LINK是专门服务于STM32的</p>
<p><a class="reference external" href="https://github.com/stlink-org/stlink">st-link</a></p>
</section>
<section id="vscode-launch-json">
<h3><span class="section-number">11.2.6. </span>vscode 配置  launch.json<a class="headerlink" href="#vscode-launch-json" title="此标题的永久链接"></a></h3>
<p>首先如果使用的是cortex的话，可以下载一个vscode插件cortex-debug</p>
<p>下完之后，如下点击，选择openocd，这个是支持st-link和jlink的。</p>
<p><img alt="sequence" src="../../_images/sequence1.gif" />launch.json</p>
<p>然后我们就需要填好配置了</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,
            &quot;executable&quot;: &quot;rt-thread.elf&quot;,
            &quot;name&quot;: &quot;Debug STM32&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;type&quot;: &quot;cortex-debug&quot;,
            &quot;servertype&quot;: &quot;openocd&quot;,
            &quot;interface&quot;: &quot;swd&quot;,
            &quot;svdFile&quot;: &quot;STM32L4x6.svd&quot;,
            &quot;configFiles&quot;: [
                &quot;interface/stlink.cfg&quot;,
                &quot;target/stm32l4x.cfg&quot;
            ],
            &quot;runToMain&quot;: false,
        },
    ]
}
</pre></div>
</div>
<p>主要填写的有</p>
<ul class="simple">
<li><p>executable ： 可以执行的elf文件（注意这个编译的时候最好带-g， 不然断点调试不到代码）</p></li>
<li><p>name ： 这个是在小虫子那里显示的名称</p></li>
<li><p>interface:  这个是选择swd或者jtag</p></li>
<li><p>svdFile： 这个是芯片的外设文件，加上这个文件可以看到外设寄存器地址和名称，这个文件可以在keil里面找到</p></li>
<li><p>configFiles： 这个就要选择stlink的配置和芯片target的配置这个都是在openocd目录下面有相应的配置的，如果没有，可以去厂商寻找，一般eclipse都是支持openocd，都会有</p></li>
<li><p>runToMain： 这个是否跑到main</p></li>
</ul>
<p>其他参数可以参考地址 <a class="reference external" href="https://code.visualstudio.com/docs/editor/debugging#_launch-configurations">launch config</a></p>
<p>配置好这些之后，就可以按F5进入调试了。</p>
<p>这边有个加断点的小技巧，很方便</p>
<p><img alt="break" src="../../_images/break.gif" /></p>
<p>Once a debug session starts, the <strong>Debug toolbar</strong> will appear on the top of the editor.</p>
<p><img alt="Debug Actions" src="../../_images/toolbar.png" /></p>
<ul class="simple">
<li><p>Continue / Pause F5</p></li>
<li><p>Step Over F10</p></li>
<li><p>Step Into F11</p></li>
<li><p>Step Out Shift+F11</p></li>
<li><p>Restart Ctrl+Shift+F5</p></li>
<li><p>Stop Shift+F5</p></li>
</ul>
<section id="id4">
<h4>汇编调试<a class="headerlink" href="#id4" title="此标题的永久链接"></a></h4>
<p>汇编显示在调试控制台里面输入命令<code class="docutils literal notranslate"><span class="pre">disassemble</span></code>可以显示</p>
<p>disass
汇编执行下一个命令
si</p>
<p>FAQ</p>
</section>
</section>
<section id="id5">
<h3><span class="section-number">11.2.7. </span>单步进行汇编调试<a class="headerlink" href="#id5" title="此标题的永久链接"></a></h3>
<p>vscode按F5进入debug单步调试</p>
<p>在GDB中</p>
<p>使用si和ni。与s与n的区别在于：s与n是C语言级别的单步调试，si与ni是汇编级别的单步调试。</p>
<p>F11相当于s</p>
<p>F10相当于n</p>
</section>
<section id="id6">
<h3><span class="section-number">11.2.8. </span>能够实时看到寄存器值的变化。<a class="headerlink" href="#id6" title="此标题的永久链接"></a></h3>
<p>使用gdb时增加-tui选项，打开gdb后运行<code class="docutils literal notranslate"><span class="pre">layout</span> <span class="pre">regs</span></code>命令。注意最好加上-tui，否则很大可能会出现花屏现象。</p>
</section>
</section>
<section id="cortex-debug">
<h2><span class="section-number">11.3. </span>Cortex debug<a class="headerlink" href="#cortex-debug" title="此标题的永久链接"></a></h2>
<p><a class="reference external" href="https://github.com/Marus/cortex-debug">github cortex debug</a></p>
</section>
<section id="armrtthreadgcc">
<h2><span class="section-number">11.4. </span>支持新的ARM开发板到RTTHREAD上的GCC 需要注意事项<a class="headerlink" href="#armrtthreadgcc" title="此标题的永久链接"></a></h2>
<p>当你的芯片是ARM的时候，而需要支持GCC的时候，在调试方面可以采用vscode来操作。</p>
<p>主要会遇到一些坑，我这边先记下来</p>
<section id="entry">
<h3><span class="section-number">11.4.1. </span>entry<a class="headerlink" href="#entry" title="此标题的永久链接"></a></h3>
<p>入口函数，通常ARM官方给的都是main为入口函数，我们需要在starupxxxx.S里面将main改成entry</p>
<p><img alt="image-20210226231138269" src="../../_images/image-20210226231138269.png" /></p>
</section>
<section id="ld">
<h3><span class="section-number">11.4.2. </span>ld特定标号<a class="headerlink" href="#ld" title="此标题的永久链接"></a></h3>
<p>在board/linker_scripts/link.lds  中FLASH中需要添加如下标号</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="o">/*</span> <span class="n">section</span> <span class="n">information</span> <span class="k">for</span> <span class="n">finsh</span> <span class="n">shell</span> <span class="o">*/</span>
        <span class="o">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
        <span class="n">__fsymtab_start</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>
        <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">FSymTab</span><span class="p">))</span>
        <span class="n">__fsymtab_end</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>

        <span class="o">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
        <span class="n">__vsymtab_start</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>
        <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">VSymTab</span><span class="p">))</span>
        <span class="n">__vsymtab_end</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>

        <span class="o">/*</span> <span class="n">section</span> <span class="n">information</span> <span class="k">for</span> <span class="n">initial</span><span class="o">.</span> <span class="o">*/</span>
        <span class="o">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
        <span class="n">__rt_init_start</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>
        <span class="n">KEEP</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">SORT</span><span class="p">(</span><span class="o">.</span><span class="n">rti_fn</span><span class="o">*</span><span class="p">)))</span>
        <span class="n">__rt_init_end</span> <span class="o">=</span> <span class="o">.</span><span class="p">;</span>
        
        <span class="o">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

        <span class="n">PROVIDE</span><span class="p">(</span><span class="n">__ctors_start__</span> <span class="o">=</span> <span class="o">.</span><span class="p">);</span>
        <span class="n">KEEP</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">SORT</span><span class="p">(</span><span class="o">.</span><span class="n">init_array</span><span class="o">.*</span><span class="p">)))</span>
        <span class="n">KEEP</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="o">.</span><span class="n">init_array</span><span class="p">))</span>
        <span class="n">PROVIDE</span><span class="p">(</span><span class="n">__ctors_end__</span> <span class="o">=</span> <span class="o">.</span><span class="p">);</span>

        <span class="o">.</span> <span class="o">=</span> <span class="n">ALIGN</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
<p>这些标号是和初始化以及一些finish cmd相关的。</p>
</section>
<section id="rtconfig-py">
<h3><span class="section-number">11.4.3. </span>rtconfig.py<a class="headerlink" href="#rtconfig-py" title="此标题的永久链接"></a></h3>
<p>这个文件夹里面gcc是用来编译的编译选项，这边要设置arm-none-eabi-gcc的路径</p>
<p>EXEC_PATH   = r’.’</p>
<p>这边需要注意的是，尽量少用</p>
<p><code class="docutils literal notranslate"> <span class="pre">-ffunction-sections</span> <span class="pre">-fdata-sections</span></code></p>
<p>这个有可能会优化一些symbol</p>
</section>
<section id="hex">
<h3><span class="section-number">11.4.4. </span>生成hex文件<a class="headerlink" href="#hex" title="此标题的永久链接"></a></h3>
<p>如果你要生成hex文件的话，需要添加如下命令</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST_ACTION</span> <span class="o">=</span> <span class="n">OBJCPY</span> <span class="o">+</span> <span class="s1">&#39; -O ihex $TARGET rtthread.hex</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">SIZE</span> <span class="o">+</span> <span class="s1">&#39; $TARGET </span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="printf">
<h2><span class="section-number">11.5. </span>printf<a class="headerlink" href="#printf" title="此标题的永久链接"></a></h2>
<p>代码里面千万不能有printf，不然调试起来会比较麻烦。</p>
<hr class="docutils" />
<p>参考：</p>
<p><a class="reference external" href="https://blog.csdn.net/qq_40833810/article/details/106713462">Cortex-debug 调试器使用介绍</a></p>
<p><a class="reference external" href="https://linuxhandbook.com/sudo-without-password/">How to Run sudo Commands Without Password</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="vscode_debug.html" class="btn btn-neutral float-left" title="10. VSCode 调试" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="vscode_plugin.html" class="btn btn-neutral float-right" title="12. VSCode 常用插件" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2020, apache.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>